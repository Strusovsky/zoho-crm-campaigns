function close_window(){confirm("Close Window?")&&close()}function unloadPage(){if(unsaved)return"You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?"}function ajaxCampaign(e){$.ajax({url:"/controllers/campaign-information.php",type:"POST",data:data,processData:!1,contentType:!1,success:function(t){var n=$.parseJSON(t);overlay.fadeOut(300);if(e===!1){var r="";r+='<div id="updateCampaign" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="updateCampaignLabel" aria-hidden="true">';r+='<div class="modal-header">';r+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>';r+='<h2 id="updateCampaignLabel">Campaign: '+n.name+"</h2>";r+="</div>";r+='<div class="modal-body">';r+="<p><strong>Success: </strong> You have updated the current record!</p>";r+="</div>";r+='<div class="modal-footer">';r+='<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>';r+="</div>";r+="</div>";$(r).appendTo("body");$("#updateCampaign").modal().on("hide",function(){location.reload()})}else window.location.replace(window.location.protocol+"//"+window.location.host+"/seminar-information.php?campaign_id="+n.campaign_id)}})}function ajaxSeminar(e){$.ajax({url:"/controllers/seminar-information.php",type:"POST",data:data,processData:!1,contentType:!1,success:function(t){var n=$.parseJSON(t);overlay.fadeOut(300);if(e===!1){var r="";r+='<div id="updateSeminar" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="updateSeminarLabel" aria-hidden="true">';r+='<div class="modal-header">';r+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>';r+='<h2 id="updateSeminarLabel">Seminar Updated</h2>';r+="</div>";r+='<div class="modal-body">';r+="<p><strong>Success: </strong> You have updated the current seminar "+n.name+"</p>";r+="</div>";r+='<div class="modal-footer">';r+='<button class="btn" onClick="document.location.reload(true)">Close</button>';r+="</div>";r+="</div>";$(r).appendTo("body");$("#updateSeminar").modal().on("hide",function(){location.reload()})}else window.location.replace(window.location.protocol+"//"+window.location.host+"/seminar-results.php?id="+n.seminar_id+"&campaign_id="+n.campaign_id)}})}function ajaxResults(e){$.ajax({url:"/controllers/seminar-results.php",type:"POST",data:data,processData:!1,contentType:!1,success:function(t){var n=$.parseJSON(t);overlay.fadeOut(300);if(e===!1){var r="";r+='<div id="updateSeminar" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="updateSeminarLabel" aria-hidden="true">';r+='<div class="modal-header">';r+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>';r+='<h2 id="updateSeminarLabel">Seminar Updated</h2>';r+="</div>";r+='<div class="modal-body">';r+="<p><strong>Success: </strong> You have updated the current seminar for the campaign: "+n.name+"</p>";r+="</div>";r+='<div class="modal-footer">';r+='<button class="btn" onClick="document.location.reload(true)">Close</button>';r+="</div>";r+="</div>";$(r).appendTo("body");$("#updateSeminar").modal().on("hide",function(){location.reload()})}else window.location.replace(window.location.protocol+"//"+window.location.host+"/seminar-information.php?campaign_id="+n.campaign_id)}})}function checkForm(e,t){var n=new FormData;for(var r=0;r<e.elements.length;r++)if(e.elements[r].type!=="submit"){n.append(e.elements[r].name,e.elements[r].value);if(e.elements[r].name==="email"){var i=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;!i.test(e.elements[r].value)||$.trim(e.elements[r].value)===""?$("#"+e.elements[r].name).addClass("error"):$("#"+e.elements[r].name).removeClass("error")}else $.trim(e.elements[r].value)===""&&e.elements[r].type==="text"?$("#"+e.elements[r].name).addClass("error"):$("#"+e.elements[r].name).removeClass("error")}if(group.hasClass("error")!==!1)return!1;switch(t){case"update_campaign":overlay.height($(document).height()).fadeIn(300);ajaxCampaign(!1);break;case"insert_campaign_add_seminar":overlay.height($(document).height()).fadeIn(300);ajaxCampaign();break;case"update_seminar_info":overlay.height($(document).height()).fadeIn(300);ajaxSeminar(!1);break;case"insert_seminar_add_results":overlay.height($(document).height()).fadeIn(300);ajaxSeminar();break;case"update_seminar_results":overlay.height($(document).height()).fadeIn(300);ajaxResults(!1);break;case"insert_results_add_seminar":overlay.height($(document).height()).fadeIn(300);ajaxResults()}return!1}var group=$("div.control-group"),input=$('div.control-group input[type="text"]'),updateCampaign=$("#update_campaign"),insertCampaign=$("#insert_campaign_add_seminar"),updateSeminar=$("#update_seminar_info"),insertSeminar=$("#insert_seminar_add_results"),updateSeminarResults=$("#update_seminar_results"),insertSeminarResults=$("#insert_results_add_seminar"),overlay=$(".overlay"),data,unsaved=!1;$(":input").change(function(){unsaved=!0;$(":button").on("click",function(){unsaved=!1})});window.onbeforeunload=unloadPage;var info=$("#status-info");switch($("#status").data("status")){case"Planning":info.addClass("text-warning");break;case"Active":info.addClass("text-success");break;case"Inactive":info.addClass("text-error");break;case"Complete":info.addClass("text-info")}group.removeClass("error");input.each(function(){$(this).blur(function(){if(this.id==="email"){var e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;e.test(this.value)&&$.trim(this.value)!==""?$("#"+this.name).removeClass("error"):$("#"+this.name).addClass("error")}else $.trim(this.value)!==""?$("#"+this.name).removeClass("error"):$("#"+this.name).addClass("error")})});updateCampaign.on("click",function(e){e.preventDefault();checkForm(this.form,this.name)});insertCampaign.on("click",function(e){e.preventDefault();checkForm(this.form,this.name)});updateSeminar.on("click",function(e){e.preventDefault();checkForm(this.form,this.name)});insertSeminar.on("click",function(e){e.preventDefault();checkForm(this.form,this.name)});updateSeminarResults.on("click",function(e){e.preventDefault();checkForm(this.form,this.name)});insertSeminarResults.on("click",function(e){e.preventDefault();checkForm(this.form,this.name)});$.each($("input"),function(){$(this).data("input")==="currency"?$(this).maskMoney({symbol:"$ ",allowZero:!0}):$(this).data("input")==="number"&&$(this).maskMoney({symbol:"",precision:0,allowZero:!0})});